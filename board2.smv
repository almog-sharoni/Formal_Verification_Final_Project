
    MODULE main 
    DEFINE
        
        rows := 6;
        columns := 7;
        
    VAR
        
        board : array -2..rows+1 of array -2..columns+1 of {"KEEPER", "BOX", "GOAL", "KEEPER_ON_GOAL","WALL" , "FLOOR", "BOX_ON_GOAL", "NULL"};  

        action : {u, d, l, r, 0};  
    

    ASSIGN
         
            init(action) := 0;
            
            -- padding in 'NULL' the values outside the board

            
                       init(board[-2][-2]) := "NULL";
                   
                       init(board[-2][-1]) := "NULL";
                   
                       init(board[-2][0]) := "NULL";
                   
                       init(board[-2][1]) := "NULL";
                   
                       init(board[-2][2]) := "NULL";
                   
                       init(board[-2][3]) := "NULL";
                   
                       init(board[-2][4]) := "NULL";
                   
                       init(board[-2][5]) := "NULL";
                   
                       init(board[-2][6]) := "NULL";
                   
                       init(board[-2][7]) := "NULL";
                   
                       init(board[-2][8]) := "NULL";
                   
                       init(board[-1][-2]) := "NULL";
                   
                       init(board[-1][-1]) := "NULL";
                   
                       init(board[-1][0]) := "NULL";
                   
                       init(board[-1][1]) := "NULL";
                   
                       init(board[-1][2]) := "NULL";
                   
                       init(board[-1][3]) := "NULL";
                   
                       init(board[-1][4]) := "NULL";
                   
                       init(board[-1][5]) := "NULL";
                   
                       init(board[-1][6]) := "NULL";
                   
                       init(board[-1][7]) := "NULL";
                   
                       init(board[-1][8]) := "NULL";
                   
                       init(board[0][-2]) := "NULL";
                   
                       init(board[0][-1]) := "NULL";
                   
                       init(board[0][0]) := "WALL";
                   
                       init(board[0][1]) := "WALL";
                   
                       init(board[0][2]) := "WALL";
                   
                       init(board[0][3]) := "WALL";
                   
                       init(board[0][4]) := "WALL";
                   
                       init(board[0][5]) := "WALL";
                   
                       init(board[0][6]) := "WALL";
                   
                       init(board[0][7]) := "NULL";
                   
                       init(board[0][8]) := "NULL";
                   
                       init(board[1][-2]) := "NULL";
                   
                       init(board[1][-1]) := "NULL";
                   
                       init(board[1][0]) := "WALL";
                   
                       init(board[1][1]) := "WALL";
                   
                       init(board[1][2]) := "WALL";
                   
                       init(board[1][3]) := "GOAL";
                   
                       init(board[1][4]) := "WALL";
                   
                       init(board[1][5]) := "WALL";
                   
                       init(board[1][6]) := "WALL";
                   
                       init(board[1][7]) := "NULL";
                   
                       init(board[1][8]) := "NULL";
                   
                       init(board[2][-2]) := "NULL";
                   
                       init(board[2][-1]) := "NULL";
                   
                       init(board[2][0]) := "WALL";
                   
                       init(board[2][1]) := "WALL";
                   
                       init(board[2][2]) := "WALL";
                   
                       init(board[2][3]) := "BOX";
                   
                       init(board[2][4]) := "WALL";
                   
                       init(board[2][5]) := "WALL";
                   
                       init(board[2][6]) := "WALL";
                   
                       init(board[2][7]) := "NULL";
                   
                       init(board[2][8]) := "NULL";
                   
                       init(board[3][-2]) := "NULL";
                   
                       init(board[3][-1]) := "NULL";
                   
                       init(board[3][0]) := "WALL";
                   
                       init(board[3][1]) := "GOAL";
                   
                       init(board[3][2]) := "BOX";
                   
                       init(board[3][3]) := "KEEPER";
                   
                       init(board[3][4]) := "BOX";
                   
                       init(board[3][5]) := "GOAL";
                   
                       init(board[3][6]) := "WALL";
                   
                       init(board[3][7]) := "NULL";
                   
                       init(board[3][8]) := "NULL";
                   
                       init(board[4][-2]) := "NULL";
                   
                       init(board[4][-1]) := "NULL";
                   
                       init(board[4][0]) := "WALL";
                   
                       init(board[4][1]) := "WALL";
                   
                       init(board[4][2]) := "WALL";
                   
                       init(board[4][3]) := "BOX";
                   
                       init(board[4][4]) := "WALL";
                   
                       init(board[4][5]) := "WALL";
                   
                       init(board[4][6]) := "WALL";
                   
                       init(board[4][7]) := "NULL";
                   
                       init(board[4][8]) := "NULL";
                   
                       init(board[5][-2]) := "NULL";
                   
                       init(board[5][-1]) := "NULL";
                   
                       init(board[5][0]) := "WALL";
                   
                       init(board[5][1]) := "WALL";
                   
                       init(board[5][2]) := "WALL";
                   
                       init(board[5][3]) := "GOAL";
                   
                       init(board[5][4]) := "WALL";
                   
                       init(board[5][5]) := "WALL";
                   
                       init(board[5][6]) := "WALL";
                   
                       init(board[5][7]) := "NULL";
                   
                       init(board[5][8]) := "NULL";
                   
                       init(board[6][-2]) := "NULL";
                   
                       init(board[6][-1]) := "NULL";
                   
                       init(board[6][0]) := "NULL";
                   
                       init(board[6][1]) := "NULL";
                   
                       init(board[6][2]) := "NULL";
                   
                       init(board[6][3]) := "NULL";
                   
                       init(board[6][4]) := "NULL";
                   
                       init(board[6][5]) := "NULL";
                   
                       init(board[6][6]) := "NULL";
                   
                       init(board[6][7]) := "NULL";
                   
                       init(board[6][8]) := "NULL";
                   
                       init(board[7][-2]) := "NULL";
                   
                       init(board[7][-1]) := "NULL";
                   
                       init(board[7][0]) := "NULL";
                   
                       init(board[7][1]) := "NULL";
                   
                       init(board[7][2]) := "NULL";
                   
                       init(board[7][3]) := "NULL";
                   
                       init(board[7][4]) := "NULL";
                   
                       init(board[7][5]) := "NULL";
                   
                       init(board[7][6]) := "NULL";
                   
                       init(board[7][7]) := "NULL";
                   
                       init(board[7][8]) := "NULL";
                   
    
        -- dont need to refer the borders as we have walls
        next(action) := {u, d, l, r};
        
        
        next(board[-2][-2]) := "NULL";
                       
        next(board[-2][-1]) := "NULL";
                       
        next(board[-2][0]) := "NULL";
                       
        next(board[-2][1]) := "NULL";
                       
        next(board[-2][2]) := "NULL";
                       
        next(board[-2][3]) := "NULL";
                       
        next(board[-2][4]) := "NULL";
                       
        next(board[-2][5]) := "NULL";
                       
        next(board[-2][6]) := "NULL";
                       
        next(board[-2][7]) := "NULL";
                       
        next(board[-2][8]) := "NULL";
                       
        next(board[-1][-2]) := "NULL";
                       
        next(board[-1][-1]) := "NULL";
                       
        next(board[-1][0]) := "NULL";
                       
        next(board[-1][1]) := "NULL";
                       
        next(board[-1][2]) := "NULL";
                       
        next(board[-1][3]) := "NULL";
                       
        next(board[-1][4]) := "NULL";
                       
        next(board[-1][5]) := "NULL";
                       
        next(board[-1][6]) := "NULL";
                       
        next(board[-1][7]) := "NULL";
                       
        next(board[-1][8]) := "NULL";
                       
        next(board[0][-2]) := "NULL";
                       
        next(board[0][-1]) := "NULL";
                       
        next(board[0][0]) := 
            case
                board[0][0] = "KEEPER_ON_GOAL": 
                    case
                        board[1][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][0] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][0] = "BOX" & (board[-2][0] = "FLOOR" | board[-2][0] = "GOAL") & next(action) = u : "GOAL";
                        board[0][1] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = r : "GOAL";
                        board[0][-1] = "BOX" & (board[0][-2] = "FLOOR" | board[0][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][0] = "KEEPER":
                    case
                        board[1][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][0] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][0] = "BOX" & (board[-2][0] = "FLOOR" | board[-2][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][1] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][-1] = "BOX" & (board[0][-2] = "FLOOR" | board[0][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][0] = "FLOOR":
                    case
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][0] = "KEEPER" | board[-2][0] = "KEEPER_ON_GOAL") & (board[-1][0] = "BOX" | board[-1][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][-2] = "KEEPER" | board[0][-2] = "KEEPER_ON_GOAL") & (board[0][-1] = "BOX" | board[0][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][0] = "GOAL":
                    case
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][0] = "KEEPER" | board[-2][0] = "KEEPER_ON_GOAL") & (board[-1][0] = "BOX" | board[-1][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][-2] = "KEEPER" | board[0][-2] = "KEEPER_ON_GOAL") & (board[0][-1] = "BOX" | board[0][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][0] = "BOX":
                    case
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[-1][0] = "FLOOR" | board[-1][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][-1] = "FLOOR" | board[0][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][0] = "BOX_ON_GOAL":
                    case
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[-1][0] = "FLOOR" | board[-1][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][-1] = "FLOOR" | board[0][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][0];

            esac;
            
        next(board[0][1]) := 
            case
                board[0][1] = "KEEPER_ON_GOAL": 
                    case
                        board[1][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][1] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][1] = "BOX" & (board[-2][1] = "FLOOR" | board[-2][1] = "GOAL") & next(action) = u : "GOAL";
                        board[0][2] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = r : "GOAL";
                        board[0][0] = "BOX" & (board[0][-1] = "FLOOR" | board[0][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][1] = "KEEPER":
                    case
                        board[1][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][1] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][1] = "BOX" & (board[-2][1] = "FLOOR" | board[-2][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][2] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][0] = "BOX" & (board[0][-1] = "FLOOR" | board[0][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][1] = "FLOOR":
                    case
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][1] = "KEEPER" | board[-2][1] = "KEEPER_ON_GOAL") & (board[-1][1] = "BOX" | board[-1][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & (board[0][0] = "BOX" | board[0][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][1] = "GOAL":
                    case
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][1] = "KEEPER" | board[-2][1] = "KEEPER_ON_GOAL") & (board[-1][1] = "BOX" | board[-1][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][-1] = "KEEPER" | board[0][-1] = "KEEPER_ON_GOAL") & (board[0][0] = "BOX" | board[0][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][1] = "BOX":
                    case
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[-1][1] = "FLOOR" | board[-1][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][1] = "BOX_ON_GOAL":
                    case
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[-1][1] = "FLOOR" | board[-1][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][1];

            esac;
            
        next(board[0][2]) := 
            case
                board[0][2] = "KEEPER_ON_GOAL": 
                    case
                        board[1][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][2] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][2] = "BOX" & (board[-2][2] = "FLOOR" | board[-2][2] = "GOAL") & next(action) = u : "GOAL";
                        board[0][3] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = r : "GOAL";
                        board[0][1] = "BOX" & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][2] = "KEEPER":
                    case
                        board[1][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][2] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][2] = "BOX" & (board[-2][2] = "FLOOR" | board[-2][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][3] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][1] = "BOX" & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][2] = "FLOOR":
                    case
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][2] = "KEEPER" | board[-2][2] = "KEEPER_ON_GOAL") & (board[-1][2] = "BOX" | board[-1][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][2] = "GOAL":
                    case
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][2] = "KEEPER" | board[-2][2] = "KEEPER_ON_GOAL") & (board[-1][2] = "BOX" | board[-1][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][2] = "BOX":
                    case
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[-1][2] = "FLOOR" | board[-1][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][2] = "BOX_ON_GOAL":
                    case
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[-1][2] = "FLOOR" | board[-1][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][2];

            esac;
            
        next(board[0][3]) := 
            case
                board[0][3] = "KEEPER_ON_GOAL": 
                    case
                        board[1][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][3] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][3] = "BOX" & (board[-2][3] = "FLOOR" | board[-2][3] = "GOAL") & next(action) = u : "GOAL";
                        board[0][4] = "BOX" & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = r : "GOAL";
                        board[0][2] = "BOX" & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][3] = "KEEPER":
                    case
                        board[1][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][3] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][3] = "BOX" & (board[-2][3] = "FLOOR" | board[-2][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][4] = "BOX" & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][2] = "BOX" & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][3] = "FLOOR":
                    case
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][3] = "KEEPER" | board[-2][3] = "KEEPER_ON_GOAL") & (board[-1][3] = "BOX" | board[-1][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][3] = "GOAL":
                    case
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][3] = "KEEPER" | board[-2][3] = "KEEPER_ON_GOAL") & (board[-1][3] = "BOX" | board[-1][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][3] = "BOX":
                    case
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[-1][3] = "FLOOR" | board[-1][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][3] = "BOX_ON_GOAL":
                    case
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[-1][3] = "FLOOR" | board[-1][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][3];

            esac;
            
        next(board[0][4]) := 
            case
                board[0][4] = "KEEPER_ON_GOAL": 
                    case
                        board[1][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][4] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][4] = "BOX" & (board[-2][4] = "FLOOR" | board[-2][4] = "GOAL") & next(action) = u : "GOAL";
                        board[0][5] = "BOX" & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = r : "GOAL";
                        board[0][3] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][4] = "KEEPER":
                    case
                        board[1][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][4] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][4] = "BOX" & (board[-2][4] = "FLOOR" | board[-2][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][5] = "BOX" & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][3] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][4] = "FLOOR":
                    case
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][4] = "KEEPER" | board[-2][4] = "KEEPER_ON_GOAL") & (board[-1][4] = "BOX" | board[-1][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][4] = "GOAL":
                    case
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][4] = "KEEPER" | board[-2][4] = "KEEPER_ON_GOAL") & (board[-1][4] = "BOX" | board[-1][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][4] = "BOX":
                    case
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[-1][4] = "FLOOR" | board[-1][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][4] = "BOX_ON_GOAL":
                    case
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[-1][4] = "FLOOR" | board[-1][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][4];

            esac;
            
        next(board[0][5]) := 
            case
                board[0][5] = "KEEPER_ON_GOAL": 
                    case
                        board[1][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][5] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][5] = "BOX" & (board[-2][5] = "FLOOR" | board[-2][5] = "GOAL") & next(action) = u : "GOAL";
                        board[0][6] = "BOX" & (board[0][7] = "FLOOR" | board[0][7] = "GOAL") & next(action) = r : "GOAL";
                        board[0][4] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][5] = "KEEPER":
                    case
                        board[1][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][5] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][5] = "BOX" & (board[-2][5] = "FLOOR" | board[-2][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][6] = "BOX" & (board[0][7] = "FLOOR" | board[0][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][4] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][5] = "FLOOR":
                    case
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][5] = "KEEPER" | board[-2][5] = "KEEPER_ON_GOAL") & (board[-1][5] = "BOX" | board[-1][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & (board[0][6] = "BOX" | board[0][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][5] = "GOAL":
                    case
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][5] = "KEEPER" | board[-2][5] = "KEEPER_ON_GOAL") & (board[-1][5] = "BOX" | board[-1][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & (board[0][6] = "BOX" | board[0][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][5] = "BOX":
                    case
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[-1][5] = "FLOOR" | board[-1][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][5] = "BOX_ON_GOAL":
                    case
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[-1][5] = "FLOOR" | board[-1][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][5];

            esac;
            
        next(board[0][6]) := 
            case
                board[0][6] = "KEEPER_ON_GOAL": 
                    case
                        board[1][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[-1][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[0][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[0][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[1][6] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = d : "GOAL";
                        board[-1][6] = "BOX" & (board[-2][6] = "FLOOR" | board[-2][6] = "GOAL") & next(action) = u : "GOAL";
                        board[0][7] = "BOX" & (board[0][8] = "FLOOR" | board[0][8] = "GOAL") & next(action) = r : "GOAL";
                        board[0][5] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[0][6] = "KEEPER":
                    case
                        board[1][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[-1][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[0][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[0][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[1][6] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[-1][6] = "BOX" & (board[-2][6] = "FLOOR" | board[-2][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[0][7] = "BOX" & (board[0][8] = "FLOOR" | board[0][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[0][5] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[0][6] = "FLOOR":
                    case
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-2][6] = "KEEPER" | board[-2][6] = "KEEPER_ON_GOAL") & (board[-1][6] = "BOX" | board[-1][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[0][8] = "KEEPER" | board[0][8] = "KEEPER_ON_GOAL") & (board[0][7] = "BOX" | board[0][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[0][6] = "GOAL":
                    case
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-2][6] = "KEEPER" | board[-2][6] = "KEEPER_ON_GOAL") & (board[-1][6] = "BOX" | board[-1][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[0][8] = "KEEPER" | board[0][8] = "KEEPER_ON_GOAL") & (board[0][7] = "BOX" | board[0][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[0][6] = "BOX":
                    case
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[-1][6] = "FLOOR" | board[-1][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][7] = "FLOOR" | board[0][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[0][6] = "BOX_ON_GOAL":
                    case
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[-1][6] = "FLOOR" | board[-1][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[0][7] = "KEEPER" | board[0][7] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[0][7] = "FLOOR" | board[0][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[0][6];

            esac;
            
        next(board[0][7]) := "NULL";
                       
        next(board[0][8]) := "NULL";
                       
        next(board[1][-2]) := "NULL";
                       
        next(board[1][-1]) := "NULL";
                       
        next(board[1][0]) := 
            case
                board[1][0] = "KEEPER_ON_GOAL": 
                    case
                        board[2][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][0] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = d : "GOAL";
                        board[0][0] = "BOX" & (board[-1][0] = "FLOOR" | board[-1][0] = "GOAL") & next(action) = u : "GOAL";
                        board[1][1] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = r : "GOAL";
                        board[1][-1] = "BOX" & (board[1][-2] = "FLOOR" | board[1][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][0] = "KEEPER":
                    case
                        board[2][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][0] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][0] = "BOX" & (board[-1][0] = "FLOOR" | board[-1][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][1] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][-1] = "BOX" & (board[1][-2] = "FLOOR" | board[1][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][0] = "FLOOR":
                    case
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & (board[0][0] = "BOX" | board[0][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][-2] = "KEEPER" | board[1][-2] = "KEEPER_ON_GOAL") & (board[1][-1] = "BOX" | board[1][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][0] = "GOAL":
                    case
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][0] = "KEEPER" | board[-1][0] = "KEEPER_ON_GOAL") & (board[0][0] = "BOX" | board[0][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][-2] = "KEEPER" | board[1][-2] = "KEEPER_ON_GOAL") & (board[1][-1] = "BOX" | board[1][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][0] = "BOX":
                    case
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][-1] = "FLOOR" | board[1][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][0] = "BOX_ON_GOAL":
                    case
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][-1] = "FLOOR" | board[1][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][0];

            esac;
            
        next(board[1][1]) := 
            case
                board[1][1] = "KEEPER_ON_GOAL": 
                    case
                        board[2][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][1] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = d : "GOAL";
                        board[0][1] = "BOX" & (board[-1][1] = "FLOOR" | board[-1][1] = "GOAL") & next(action) = u : "GOAL";
                        board[1][2] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = r : "GOAL";
                        board[1][0] = "BOX" & (board[1][-1] = "FLOOR" | board[1][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][1] = "KEEPER":
                    case
                        board[2][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][1] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][1] = "BOX" & (board[-1][1] = "FLOOR" | board[-1][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][2] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][0] = "BOX" & (board[1][-1] = "FLOOR" | board[1][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][1] = "FLOOR":
                    case
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][1] = "GOAL":
                    case
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][1] = "KEEPER" | board[-1][1] = "KEEPER_ON_GOAL") & (board[0][1] = "BOX" | board[0][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][-1] = "KEEPER" | board[1][-1] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][1] = "BOX":
                    case
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][1] = "BOX_ON_GOAL":
                    case
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][1];

            esac;
            
        next(board[1][2]) := 
            case
                board[1][2] = "KEEPER_ON_GOAL": 
                    case
                        board[2][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][2] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = d : "GOAL";
                        board[0][2] = "BOX" & (board[-1][2] = "FLOOR" | board[-1][2] = "GOAL") & next(action) = u : "GOAL";
                        board[1][3] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = r : "GOAL";
                        board[1][1] = "BOX" & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][2] = "KEEPER":
                    case
                        board[2][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][2] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][2] = "BOX" & (board[-1][2] = "FLOOR" | board[-1][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][3] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][1] = "BOX" & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][2] = "FLOOR":
                    case
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][2] = "GOAL":
                    case
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][2] = "KEEPER" | board[-1][2] = "KEEPER_ON_GOAL") & (board[0][2] = "BOX" | board[0][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][2] = "BOX":
                    case
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][2] = "BOX_ON_GOAL":
                    case
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][2];

            esac;
            
        next(board[1][3]) := 
            case
                board[1][3] = "KEEPER_ON_GOAL": 
                    case
                        board[2][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][3] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = d : "GOAL";
                        board[0][3] = "BOX" & (board[-1][3] = "FLOOR" | board[-1][3] = "GOAL") & next(action) = u : "GOAL";
                        board[1][4] = "BOX" & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = r : "GOAL";
                        board[1][2] = "BOX" & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][3] = "KEEPER":
                    case
                        board[2][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][3] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][3] = "BOX" & (board[-1][3] = "FLOOR" | board[-1][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][4] = "BOX" & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][2] = "BOX" & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][3] = "FLOOR":
                    case
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][3] = "GOAL":
                    case
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][3] = "KEEPER" | board[-1][3] = "KEEPER_ON_GOAL") & (board[0][3] = "BOX" | board[0][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][3] = "BOX":
                    case
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][3] = "BOX_ON_GOAL":
                    case
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][3];

            esac;
            
        next(board[1][4]) := 
            case
                board[1][4] = "KEEPER_ON_GOAL": 
                    case
                        board[2][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][4] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = d : "GOAL";
                        board[0][4] = "BOX" & (board[-1][4] = "FLOOR" | board[-1][4] = "GOAL") & next(action) = u : "GOAL";
                        board[1][5] = "BOX" & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = r : "GOAL";
                        board[1][3] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][4] = "KEEPER":
                    case
                        board[2][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][4] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][4] = "BOX" & (board[-1][4] = "FLOOR" | board[-1][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][5] = "BOX" & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][3] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][4] = "FLOOR":
                    case
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][4] = "GOAL":
                    case
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][4] = "KEEPER" | board[-1][4] = "KEEPER_ON_GOAL") & (board[0][4] = "BOX" | board[0][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][4] = "BOX":
                    case
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][4] = "BOX_ON_GOAL":
                    case
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][4];

            esac;
            
        next(board[1][5]) := 
            case
                board[1][5] = "KEEPER_ON_GOAL": 
                    case
                        board[2][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][5] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = d : "GOAL";
                        board[0][5] = "BOX" & (board[-1][5] = "FLOOR" | board[-1][5] = "GOAL") & next(action) = u : "GOAL";
                        board[1][6] = "BOX" & (board[1][7] = "FLOOR" | board[1][7] = "GOAL") & next(action) = r : "GOAL";
                        board[1][4] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][5] = "KEEPER":
                    case
                        board[2][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][5] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][5] = "BOX" & (board[-1][5] = "FLOOR" | board[-1][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][6] = "BOX" & (board[1][7] = "FLOOR" | board[1][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][4] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][5] = "FLOOR":
                    case
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][5] = "GOAL":
                    case
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][5] = "KEEPER" | board[-1][5] = "KEEPER_ON_GOAL") & (board[0][5] = "BOX" | board[0][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][5] = "BOX":
                    case
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][5] = "BOX_ON_GOAL":
                    case
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][5];

            esac;
            
        next(board[1][6]) := 
            case
                board[1][6] = "KEEPER_ON_GOAL": 
                    case
                        board[2][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[0][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[1][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[1][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[2][6] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = d : "GOAL";
                        board[0][6] = "BOX" & (board[-1][6] = "FLOOR" | board[-1][6] = "GOAL") & next(action) = u : "GOAL";
                        board[1][7] = "BOX" & (board[1][8] = "FLOOR" | board[1][8] = "GOAL") & next(action) = r : "GOAL";
                        board[1][5] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[1][6] = "KEEPER":
                    case
                        board[2][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[0][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[1][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[1][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[2][6] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[0][6] = "BOX" & (board[-1][6] = "FLOOR" | board[-1][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[1][7] = "BOX" & (board[1][8] = "FLOOR" | board[1][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[1][5] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[1][6] = "FLOOR":
                    case
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & (board[0][6] = "BOX" | board[0][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[1][8] = "KEEPER" | board[1][8] = "KEEPER_ON_GOAL") & (board[1][7] = "BOX" | board[1][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[1][6] = "GOAL":
                    case
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[-1][6] = "KEEPER" | board[-1][6] = "KEEPER_ON_GOAL") & (board[0][6] = "BOX" | board[0][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[1][8] = "KEEPER" | board[1][8] = "KEEPER_ON_GOAL") & (board[1][7] = "BOX" | board[1][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[1][6] = "BOX":
                    case
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][7] = "FLOOR" | board[1][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[1][6] = "BOX_ON_GOAL":
                    case
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[1][7] = "KEEPER" | board[1][7] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[1][7] = "FLOOR" | board[1][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[1][6];

            esac;
            
        next(board[1][7]) := "NULL";
                       
        next(board[1][8]) := "NULL";
                       
        next(board[2][-2]) := "NULL";
                       
        next(board[2][-1]) := "NULL";
                       
        next(board[2][0]) := 
            case
                board[2][0] = "KEEPER_ON_GOAL": 
                    case
                        board[3][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][0] = "BOX" & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = d : "GOAL";
                        board[1][0] = "BOX" & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = u : "GOAL";
                        board[2][1] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = r : "GOAL";
                        board[2][-1] = "BOX" & (board[2][-2] = "FLOOR" | board[2][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][0] = "KEEPER":
                    case
                        board[3][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][0] = "BOX" & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][0] = "BOX" & (board[0][0] = "FLOOR" | board[0][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][1] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][-1] = "BOX" & (board[2][-2] = "FLOOR" | board[2][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][0] = "FLOOR":
                    case
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][-2] = "KEEPER" | board[2][-2] = "KEEPER_ON_GOAL") & (board[2][-1] = "BOX" | board[2][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][0] = "GOAL":
                    case
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][0] = "KEEPER" | board[0][0] = "KEEPER_ON_GOAL") & (board[1][0] = "BOX" | board[1][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][-2] = "KEEPER" | board[2][-2] = "KEEPER_ON_GOAL") & (board[2][-1] = "BOX" | board[2][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][0] = "BOX":
                    case
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][-1] = "FLOOR" | board[2][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][0] = "BOX_ON_GOAL":
                    case
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][-1] = "FLOOR" | board[2][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][0];

            esac;
            
        next(board[2][1]) := 
            case
                board[2][1] = "KEEPER_ON_GOAL": 
                    case
                        board[3][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][1] = "BOX" & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = d : "GOAL";
                        board[1][1] = "BOX" & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = u : "GOAL";
                        board[2][2] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = r : "GOAL";
                        board[2][0] = "BOX" & (board[2][-1] = "FLOOR" | board[2][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][1] = "KEEPER":
                    case
                        board[3][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][1] = "BOX" & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][1] = "BOX" & (board[0][1] = "FLOOR" | board[0][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][2] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][0] = "BOX" & (board[2][-1] = "FLOOR" | board[2][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][1] = "FLOOR":
                    case
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][1] = "GOAL":
                    case
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][1] = "KEEPER" | board[0][1] = "KEEPER_ON_GOAL") & (board[1][1] = "BOX" | board[1][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][-1] = "KEEPER" | board[2][-1] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][1] = "BOX":
                    case
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][1] = "BOX_ON_GOAL":
                    case
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][1];

            esac;
            
        next(board[2][2]) := 
            case
                board[2][2] = "KEEPER_ON_GOAL": 
                    case
                        board[3][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][2] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = d : "GOAL";
                        board[1][2] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = u : "GOAL";
                        board[2][3] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = r : "GOAL";
                        board[2][1] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][2] = "KEEPER":
                    case
                        board[3][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][2] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][2] = "BOX" & (board[0][2] = "FLOOR" | board[0][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][3] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][1] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][2] = "FLOOR":
                    case
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][2] = "GOAL":
                    case
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][2] = "KEEPER" | board[0][2] = "KEEPER_ON_GOAL") & (board[1][2] = "BOX" | board[1][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][2] = "BOX":
                    case
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][2] = "BOX_ON_GOAL":
                    case
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][2];

            esac;
            
        next(board[2][3]) := 
            case
                board[2][3] = "KEEPER_ON_GOAL": 
                    case
                        board[3][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][3] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = d : "GOAL";
                        board[1][3] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = u : "GOAL";
                        board[2][4] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = r : "GOAL";
                        board[2][2] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][3] = "KEEPER":
                    case
                        board[3][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][3] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][3] = "BOX" & (board[0][3] = "FLOOR" | board[0][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][4] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][2] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][3] = "FLOOR":
                    case
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][3] = "GOAL":
                    case
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][3] = "KEEPER" | board[0][3] = "KEEPER_ON_GOAL") & (board[1][3] = "BOX" | board[1][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][3] = "BOX":
                    case
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][3] = "BOX_ON_GOAL":
                    case
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][3];

            esac;
            
        next(board[2][4]) := 
            case
                board[2][4] = "KEEPER_ON_GOAL": 
                    case
                        board[3][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][4] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = d : "GOAL";
                        board[1][4] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = u : "GOAL";
                        board[2][5] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = r : "GOAL";
                        board[2][3] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][4] = "KEEPER":
                    case
                        board[3][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][4] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][4] = "BOX" & (board[0][4] = "FLOOR" | board[0][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][5] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][3] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][4] = "FLOOR":
                    case
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][4] = "GOAL":
                    case
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][4] = "KEEPER" | board[0][4] = "KEEPER_ON_GOAL") & (board[1][4] = "BOX" | board[1][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][4] = "BOX":
                    case
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][4] = "BOX_ON_GOAL":
                    case
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][4];

            esac;
            
        next(board[2][5]) := 
            case
                board[2][5] = "KEEPER_ON_GOAL": 
                    case
                        board[3][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][5] = "BOX" & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = d : "GOAL";
                        board[1][5] = "BOX" & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = u : "GOAL";
                        board[2][6] = "BOX" & (board[2][7] = "FLOOR" | board[2][7] = "GOAL") & next(action) = r : "GOAL";
                        board[2][4] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][5] = "KEEPER":
                    case
                        board[3][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][5] = "BOX" & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][5] = "BOX" & (board[0][5] = "FLOOR" | board[0][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][6] = "BOX" & (board[2][7] = "FLOOR" | board[2][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][4] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][5] = "FLOOR":
                    case
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][5] = "GOAL":
                    case
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][5] = "KEEPER" | board[0][5] = "KEEPER_ON_GOAL") & (board[1][5] = "BOX" | board[1][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][5] = "BOX":
                    case
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][5] = "BOX_ON_GOAL":
                    case
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][5];

            esac;
            
        next(board[2][6]) := 
            case
                board[2][6] = "KEEPER_ON_GOAL": 
                    case
                        board[3][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[1][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[2][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[2][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[3][6] = "BOX" & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = d : "GOAL";
                        board[1][6] = "BOX" & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = u : "GOAL";
                        board[2][7] = "BOX" & (board[2][8] = "FLOOR" | board[2][8] = "GOAL") & next(action) = r : "GOAL";
                        board[2][5] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[2][6] = "KEEPER":
                    case
                        board[3][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[1][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[2][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[2][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[3][6] = "BOX" & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[1][6] = "BOX" & (board[0][6] = "FLOOR" | board[0][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[2][7] = "BOX" & (board[2][8] = "FLOOR" | board[2][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[2][5] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[2][6] = "FLOOR":
                    case
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[2][8] = "KEEPER" | board[2][8] = "KEEPER_ON_GOAL") & (board[2][7] = "BOX" | board[2][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[2][6] = "GOAL":
                    case
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[0][6] = "KEEPER" | board[0][6] = "KEEPER_ON_GOAL") & (board[1][6] = "BOX" | board[1][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[2][8] = "KEEPER" | board[2][8] = "KEEPER_ON_GOAL") & (board[2][7] = "BOX" | board[2][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[2][6] = "BOX":
                    case
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][7] = "FLOOR" | board[2][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[2][6] = "BOX_ON_GOAL":
                    case
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[2][7] = "KEEPER" | board[2][7] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[2][7] = "FLOOR" | board[2][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[2][6];

            esac;
            
        next(board[2][7]) := "NULL";
                       
        next(board[2][8]) := "NULL";
                       
        next(board[3][-2]) := "NULL";
                       
        next(board[3][-1]) := "NULL";
                       
        next(board[3][0]) := 
            case
                board[3][0] = "KEEPER_ON_GOAL": 
                    case
                        board[4][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][0] = "BOX" & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = d : "GOAL";
                        board[2][0] = "BOX" & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = u : "GOAL";
                        board[3][1] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = r : "GOAL";
                        board[3][-1] = "BOX" & (board[3][-2] = "FLOOR" | board[3][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][0] = "KEEPER":
                    case
                        board[4][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][0] = "BOX" & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][0] = "BOX" & (board[1][0] = "FLOOR" | board[1][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][1] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][-1] = "BOX" & (board[3][-2] = "FLOOR" | board[3][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][0] = "FLOOR":
                    case
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][-2] = "KEEPER" | board[3][-2] = "KEEPER_ON_GOAL") & (board[3][-1] = "BOX" | board[3][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][0] = "GOAL":
                    case
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][0] = "KEEPER" | board[1][0] = "KEEPER_ON_GOAL") & (board[2][0] = "BOX" | board[2][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][-2] = "KEEPER" | board[3][-2] = "KEEPER_ON_GOAL") & (board[3][-1] = "BOX" | board[3][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][0] = "BOX":
                    case
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][-1] = "FLOOR" | board[3][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][0] = "BOX_ON_GOAL":
                    case
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][-1] = "FLOOR" | board[3][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][0];

            esac;
            
        next(board[3][1]) := 
            case
                board[3][1] = "KEEPER_ON_GOAL": 
                    case
                        board[4][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][1] = "BOX" & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = d : "GOAL";
                        board[2][1] = "BOX" & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = u : "GOAL";
                        board[3][2] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = r : "GOAL";
                        board[3][0] = "BOX" & (board[3][-1] = "FLOOR" | board[3][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][1] = "KEEPER":
                    case
                        board[4][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][1] = "BOX" & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][1] = "BOX" & (board[1][1] = "FLOOR" | board[1][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][2] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][0] = "BOX" & (board[3][-1] = "FLOOR" | board[3][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][1] = "FLOOR":
                    case
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][1] = "GOAL":
                    case
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][1] = "KEEPER" | board[1][1] = "KEEPER_ON_GOAL") & (board[2][1] = "BOX" | board[2][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][-1] = "KEEPER" | board[3][-1] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][1] = "BOX":
                    case
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][1] = "BOX_ON_GOAL":
                    case
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][1];

            esac;
            
        next(board[3][2]) := 
            case
                board[3][2] = "KEEPER_ON_GOAL": 
                    case
                        board[4][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][2] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = d : "GOAL";
                        board[2][2] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = u : "GOAL";
                        board[3][3] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = r : "GOAL";
                        board[3][1] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][2] = "KEEPER":
                    case
                        board[4][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][2] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][2] = "BOX" & (board[1][2] = "FLOOR" | board[1][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][3] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][1] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][2] = "FLOOR":
                    case
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][2] = "GOAL":
                    case
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][2] = "KEEPER" | board[1][2] = "KEEPER_ON_GOAL") & (board[2][2] = "BOX" | board[2][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][2] = "BOX":
                    case
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][2] = "BOX_ON_GOAL":
                    case
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][2];

            esac;
            
        next(board[3][3]) := 
            case
                board[3][3] = "KEEPER_ON_GOAL": 
                    case
                        board[4][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][3] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = d : "GOAL";
                        board[2][3] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = u : "GOAL";
                        board[3][4] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = r : "GOAL";
                        board[3][2] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][3] = "KEEPER":
                    case
                        board[4][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][3] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][3] = "BOX" & (board[1][3] = "FLOOR" | board[1][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][4] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][2] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][3] = "FLOOR":
                    case
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][3] = "GOAL":
                    case
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][3] = "KEEPER" | board[1][3] = "KEEPER_ON_GOAL") & (board[2][3] = "BOX" | board[2][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][3] = "BOX":
                    case
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][3] = "BOX_ON_GOAL":
                    case
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][3];

            esac;
            
        next(board[3][4]) := 
            case
                board[3][4] = "KEEPER_ON_GOAL": 
                    case
                        board[4][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][4] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = d : "GOAL";
                        board[2][4] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = u : "GOAL";
                        board[3][5] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = r : "GOAL";
                        board[3][3] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][4] = "KEEPER":
                    case
                        board[4][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][4] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][4] = "BOX" & (board[1][4] = "FLOOR" | board[1][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][5] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][3] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][4] = "FLOOR":
                    case
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][4] = "GOAL":
                    case
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][4] = "KEEPER" | board[1][4] = "KEEPER_ON_GOAL") & (board[2][4] = "BOX" | board[2][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][4] = "BOX":
                    case
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][4] = "BOX_ON_GOAL":
                    case
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][4];

            esac;
            
        next(board[3][5]) := 
            case
                board[3][5] = "KEEPER_ON_GOAL": 
                    case
                        board[4][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][5] = "BOX" & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = d : "GOAL";
                        board[2][5] = "BOX" & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = u : "GOAL";
                        board[3][6] = "BOX" & (board[3][7] = "FLOOR" | board[3][7] = "GOAL") & next(action) = r : "GOAL";
                        board[3][4] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][5] = "KEEPER":
                    case
                        board[4][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][5] = "BOX" & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][5] = "BOX" & (board[1][5] = "FLOOR" | board[1][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][6] = "BOX" & (board[3][7] = "FLOOR" | board[3][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][4] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][5] = "FLOOR":
                    case
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][5] = "GOAL":
                    case
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][5] = "KEEPER" | board[1][5] = "KEEPER_ON_GOAL") & (board[2][5] = "BOX" | board[2][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][5] = "BOX":
                    case
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][5] = "BOX_ON_GOAL":
                    case
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][5];

            esac;
            
        next(board[3][6]) := 
            case
                board[3][6] = "KEEPER_ON_GOAL": 
                    case
                        board[4][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[2][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[3][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[3][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[4][6] = "BOX" & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = d : "GOAL";
                        board[2][6] = "BOX" & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = u : "GOAL";
                        board[3][7] = "BOX" & (board[3][8] = "FLOOR" | board[3][8] = "GOAL") & next(action) = r : "GOAL";
                        board[3][5] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[3][6] = "KEEPER":
                    case
                        board[4][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[2][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[3][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[3][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[4][6] = "BOX" & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[2][6] = "BOX" & (board[1][6] = "FLOOR" | board[1][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[3][7] = "BOX" & (board[3][8] = "FLOOR" | board[3][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[3][5] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[3][6] = "FLOOR":
                    case
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[3][8] = "KEEPER" | board[3][8] = "KEEPER_ON_GOAL") & (board[3][7] = "BOX" | board[3][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[3][6] = "GOAL":
                    case
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[1][6] = "KEEPER" | board[1][6] = "KEEPER_ON_GOAL") & (board[2][6] = "BOX" | board[2][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[3][8] = "KEEPER" | board[3][8] = "KEEPER_ON_GOAL") & (board[3][7] = "BOX" | board[3][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[3][6] = "BOX":
                    case
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][7] = "FLOOR" | board[3][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[3][6] = "BOX_ON_GOAL":
                    case
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[3][7] = "KEEPER" | board[3][7] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[3][7] = "FLOOR" | board[3][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[3][6];

            esac;
            
        next(board[3][7]) := "NULL";
                       
        next(board[3][8]) := "NULL";
                       
        next(board[4][-2]) := "NULL";
                       
        next(board[4][-1]) := "NULL";
                       
        next(board[4][0]) := 
            case
                board[4][0] = "KEEPER_ON_GOAL": 
                    case
                        board[5][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][0] = "BOX" & (board[6][0] = "FLOOR" | board[6][0] = "GOAL") & next(action) = d : "GOAL";
                        board[3][0] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = u : "GOAL";
                        board[4][1] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = r : "GOAL";
                        board[4][-1] = "BOX" & (board[4][-2] = "FLOOR" | board[4][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][0] = "KEEPER":
                    case
                        board[5][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][0] = "BOX" & (board[6][0] = "FLOOR" | board[6][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][0] = "BOX" & (board[2][0] = "FLOOR" | board[2][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][1] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][-1] = "BOX" & (board[4][-2] = "FLOOR" | board[4][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][0] = "FLOOR":
                    case
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & (board[5][0] = "BOX" | board[5][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][-2] = "KEEPER" | board[4][-2] = "KEEPER_ON_GOAL") & (board[4][-1] = "BOX" | board[4][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][0] = "GOAL":
                    case
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & (board[5][0] = "BOX" | board[5][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][0] = "KEEPER" | board[2][0] = "KEEPER_ON_GOAL") & (board[3][0] = "BOX" | board[3][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][-2] = "KEEPER" | board[4][-2] = "KEEPER_ON_GOAL") & (board[4][-1] = "BOX" | board[4][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][0] = "BOX":
                    case
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][-1] = "FLOOR" | board[4][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][0] = "BOX_ON_GOAL":
                    case
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][-1] = "FLOOR" | board[4][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][0];

            esac;
            
        next(board[4][1]) := 
            case
                board[4][1] = "KEEPER_ON_GOAL": 
                    case
                        board[5][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][1] = "BOX" & (board[6][1] = "FLOOR" | board[6][1] = "GOAL") & next(action) = d : "GOAL";
                        board[3][1] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = u : "GOAL";
                        board[4][2] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = r : "GOAL";
                        board[4][0] = "BOX" & (board[4][-1] = "FLOOR" | board[4][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][1] = "KEEPER":
                    case
                        board[5][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][1] = "BOX" & (board[6][1] = "FLOOR" | board[6][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][1] = "BOX" & (board[2][1] = "FLOOR" | board[2][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][2] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][0] = "BOX" & (board[4][-1] = "FLOOR" | board[4][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][1] = "FLOOR":
                    case
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][1] = "GOAL":
                    case
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][1] = "KEEPER" | board[2][1] = "KEEPER_ON_GOAL") & (board[3][1] = "BOX" | board[3][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][-1] = "KEEPER" | board[4][-1] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][1] = "BOX":
                    case
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][1] = "BOX_ON_GOAL":
                    case
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][1];

            esac;
            
        next(board[4][2]) := 
            case
                board[4][2] = "KEEPER_ON_GOAL": 
                    case
                        board[5][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][2] = "BOX" & (board[6][2] = "FLOOR" | board[6][2] = "GOAL") & next(action) = d : "GOAL";
                        board[3][2] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = u : "GOAL";
                        board[4][3] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = r : "GOAL";
                        board[4][1] = "BOX" & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][2] = "KEEPER":
                    case
                        board[5][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][2] = "BOX" & (board[6][2] = "FLOOR" | board[6][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][2] = "BOX" & (board[2][2] = "FLOOR" | board[2][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][3] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][1] = "BOX" & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][2] = "FLOOR":
                    case
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][2] = "GOAL":
                    case
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][2] = "KEEPER" | board[2][2] = "KEEPER_ON_GOAL") & (board[3][2] = "BOX" | board[3][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][2] = "BOX":
                    case
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][2] = "BOX_ON_GOAL":
                    case
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][2];

            esac;
            
        next(board[4][3]) := 
            case
                board[4][3] = "KEEPER_ON_GOAL": 
                    case
                        board[5][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][3] = "BOX" & (board[6][3] = "FLOOR" | board[6][3] = "GOAL") & next(action) = d : "GOAL";
                        board[3][3] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = u : "GOAL";
                        board[4][4] = "BOX" & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = r : "GOAL";
                        board[4][2] = "BOX" & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][3] = "KEEPER":
                    case
                        board[5][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][3] = "BOX" & (board[6][3] = "FLOOR" | board[6][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][3] = "BOX" & (board[2][3] = "FLOOR" | board[2][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][4] = "BOX" & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][2] = "BOX" & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][3] = "FLOOR":
                    case
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][3] = "GOAL":
                    case
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][3] = "KEEPER" | board[2][3] = "KEEPER_ON_GOAL") & (board[3][3] = "BOX" | board[3][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][3] = "BOX":
                    case
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][3] = "BOX_ON_GOAL":
                    case
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][3];

            esac;
            
        next(board[4][4]) := 
            case
                board[4][4] = "KEEPER_ON_GOAL": 
                    case
                        board[5][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][4] = "BOX" & (board[6][4] = "FLOOR" | board[6][4] = "GOAL") & next(action) = d : "GOAL";
                        board[3][4] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = u : "GOAL";
                        board[4][5] = "BOX" & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = r : "GOAL";
                        board[4][3] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][4] = "KEEPER":
                    case
                        board[5][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][4] = "BOX" & (board[6][4] = "FLOOR" | board[6][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][4] = "BOX" & (board[2][4] = "FLOOR" | board[2][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][5] = "BOX" & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][3] = "BOX" & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][4] = "FLOOR":
                    case
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][4] = "GOAL":
                    case
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][4] = "KEEPER" | board[2][4] = "KEEPER_ON_GOAL") & (board[3][4] = "BOX" | board[3][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][4] = "BOX":
                    case
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][4] = "BOX_ON_GOAL":
                    case
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][4];

            esac;
            
        next(board[4][5]) := 
            case
                board[4][5] = "KEEPER_ON_GOAL": 
                    case
                        board[5][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][5] = "BOX" & (board[6][5] = "FLOOR" | board[6][5] = "GOAL") & next(action) = d : "GOAL";
                        board[3][5] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = u : "GOAL";
                        board[4][6] = "BOX" & (board[4][7] = "FLOOR" | board[4][7] = "GOAL") & next(action) = r : "GOAL";
                        board[4][4] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][5] = "KEEPER":
                    case
                        board[5][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][5] = "BOX" & (board[6][5] = "FLOOR" | board[6][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][5] = "BOX" & (board[2][5] = "FLOOR" | board[2][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][6] = "BOX" & (board[4][7] = "FLOOR" | board[4][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][4] = "BOX" & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][5] = "FLOOR":
                    case
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][5] = "GOAL":
                    case
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][5] = "KEEPER" | board[2][5] = "KEEPER_ON_GOAL") & (board[3][5] = "BOX" | board[3][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][5] = "BOX":
                    case
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][5] = "BOX_ON_GOAL":
                    case
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][5];

            esac;
            
        next(board[4][6]) := 
            case
                board[4][6] = "KEEPER_ON_GOAL": 
                    case
                        board[5][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[3][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[4][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[4][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[5][6] = "BOX" & (board[6][6] = "FLOOR" | board[6][6] = "GOAL") & next(action) = d : "GOAL";
                        board[3][6] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = u : "GOAL";
                        board[4][7] = "BOX" & (board[4][8] = "FLOOR" | board[4][8] = "GOAL") & next(action) = r : "GOAL";
                        board[4][5] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[4][6] = "KEEPER":
                    case
                        board[5][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[3][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[4][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[4][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[5][6] = "BOX" & (board[6][6] = "FLOOR" | board[6][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[3][6] = "BOX" & (board[2][6] = "FLOOR" | board[2][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[4][7] = "BOX" & (board[4][8] = "FLOOR" | board[4][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[4][5] = "BOX" & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[4][6] = "FLOOR":
                    case
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & (board[5][6] = "BOX" | board[5][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[4][8] = "KEEPER" | board[4][8] = "KEEPER_ON_GOAL") & (board[4][7] = "BOX" | board[4][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[4][6] = "GOAL":
                    case
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & (board[5][6] = "BOX" | board[5][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[2][6] = "KEEPER" | board[2][6] = "KEEPER_ON_GOAL") & (board[3][6] = "BOX" | board[3][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[4][8] = "KEEPER" | board[4][8] = "KEEPER_ON_GOAL") & (board[4][7] = "BOX" | board[4][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[4][6] = "BOX":
                    case
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][7] = "FLOOR" | board[4][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[4][6] = "BOX_ON_GOAL":
                    case
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[4][7] = "KEEPER" | board[4][7] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[4][7] = "FLOOR" | board[4][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[4][6];

            esac;
            
        next(board[4][7]) := "NULL";
                       
        next(board[4][8]) := "NULL";
                       
        next(board[5][-2]) := "NULL";
                       
        next(board[5][-1]) := "NULL";
                       
        next(board[5][0]) := 
            case
                board[5][0] = "KEEPER_ON_GOAL": 
                    case
                        board[6][0] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][0] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][1] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][-1] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][0] = "BOX" & (board[7][0] = "FLOOR" | board[7][0] = "GOAL") & next(action) = d : "GOAL";
                        board[4][0] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = u : "GOAL";
                        board[5][1] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = r : "GOAL";
                        board[5][-1] = "BOX" & (board[5][-2] = "FLOOR" | board[5][-2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][0] = "KEEPER":
                    case
                        board[6][0] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][0] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][1] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][-1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][0] = "BOX" & (board[7][0] = "FLOOR" | board[7][0] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][0] = "BOX" & (board[3][0] = "FLOOR" | board[3][0] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][1] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][-1] = "BOX" & (board[5][-2] = "FLOOR" | board[5][-2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][0] = "FLOOR":
                    case
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][0] = "KEEPER" | board[7][0] = "KEEPER_ON_GOAL") & (board[6][0] = "BOX" | board[6][0] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][-2] = "KEEPER" | board[5][-2] = "KEEPER_ON_GOAL") & (board[5][-1] = "BOX" | board[5][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][0] = "GOAL":
                    case
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][0] = "KEEPER" | board[7][0] = "KEEPER_ON_GOAL") & (board[6][0] = "BOX" | board[6][0] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][0] = "KEEPER" | board[3][0] = "KEEPER_ON_GOAL") & (board[4][0] = "BOX" | board[4][0] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][-2] = "KEEPER" | board[5][-2] = "KEEPER_ON_GOAL") & (board[5][-1] = "BOX" | board[5][-1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][0] = "BOX":
                    case
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[6][0] = "FLOOR" | board[6][0] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][-1] = "FLOOR" | board[5][-1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][0] = "BOX_ON_GOAL":
                    case
                        (board[6][0] = "KEEPER" | board[6][0] = "KEEPER_ON_GOAL") & (board[4][0] = "FLOOR" | board[4][0] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][0] = "KEEPER" | board[4][0] = "KEEPER_ON_GOAL") & (board[6][0] = "FLOOR" | board[6][0] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][-1] = "FLOOR" | board[5][-1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][0];

            esac;
            
        next(board[5][1]) := 
            case
                board[5][1] = "KEEPER_ON_GOAL": 
                    case
                        board[6][1] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][1] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][2] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][0] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][1] = "BOX" & (board[7][1] = "FLOOR" | board[7][1] = "GOAL") & next(action) = d : "GOAL";
                        board[4][1] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = u : "GOAL";
                        board[5][2] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = r : "GOAL";
                        board[5][0] = "BOX" & (board[5][-1] = "FLOOR" | board[5][-1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][1] = "KEEPER":
                    case
                        board[6][1] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][1] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][2] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][0] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][1] = "BOX" & (board[7][1] = "FLOOR" | board[7][1] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][1] = "BOX" & (board[3][1] = "FLOOR" | board[3][1] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][2] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][0] = "BOX" & (board[5][-1] = "FLOOR" | board[5][-1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][1] = "FLOOR":
                    case
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][1] = "KEEPER" | board[7][1] = "KEEPER_ON_GOAL") & (board[6][1] = "BOX" | board[6][1] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & (board[5][0] = "BOX" | board[5][0] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][1] = "GOAL":
                    case
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][1] = "KEEPER" | board[7][1] = "KEEPER_ON_GOAL") & (board[6][1] = "BOX" | board[6][1] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][1] = "KEEPER" | board[3][1] = "KEEPER_ON_GOAL") & (board[4][1] = "BOX" | board[4][1] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][-1] = "KEEPER" | board[5][-1] = "KEEPER_ON_GOAL") & (board[5][0] = "BOX" | board[5][0] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][1] = "BOX":
                    case
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[6][1] = "FLOOR" | board[6][1] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][1] = "BOX_ON_GOAL":
                    case
                        (board[6][1] = "KEEPER" | board[6][1] = "KEEPER_ON_GOAL") & (board[4][1] = "FLOOR" | board[4][1] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][1] = "KEEPER" | board[4][1] = "KEEPER_ON_GOAL") & (board[6][1] = "FLOOR" | board[6][1] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][1];

            esac;
            
        next(board[5][2]) := 
            case
                board[5][2] = "KEEPER_ON_GOAL": 
                    case
                        board[6][2] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][2] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][3] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][1] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][2] = "BOX" & (board[7][2] = "FLOOR" | board[7][2] = "GOAL") & next(action) = d : "GOAL";
                        board[4][2] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = u : "GOAL";
                        board[5][3] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = r : "GOAL";
                        board[5][1] = "BOX" & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][2] = "KEEPER":
                    case
                        board[6][2] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][2] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][3] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][1] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][2] = "BOX" & (board[7][2] = "FLOOR" | board[7][2] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][2] = "BOX" & (board[3][2] = "FLOOR" | board[3][2] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][3] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][1] = "BOX" & (board[5][0] = "FLOOR" | board[5][0] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][2] = "FLOOR":
                    case
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][2] = "KEEPER" | board[7][2] = "KEEPER_ON_GOAL") & (board[6][2] = "BOX" | board[6][2] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][2] = "GOAL":
                    case
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][2] = "KEEPER" | board[7][2] = "KEEPER_ON_GOAL") & (board[6][2] = "BOX" | board[6][2] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][2] = "KEEPER" | board[3][2] = "KEEPER_ON_GOAL") & (board[4][2] = "BOX" | board[4][2] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][0] = "KEEPER" | board[5][0] = "KEEPER_ON_GOAL") & (board[5][1] = "BOX" | board[5][1] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][2] = "BOX":
                    case
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[6][2] = "FLOOR" | board[6][2] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][2] = "BOX_ON_GOAL":
                    case
                        (board[6][2] = "KEEPER" | board[6][2] = "KEEPER_ON_GOAL") & (board[4][2] = "FLOOR" | board[4][2] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][2] = "KEEPER" | board[4][2] = "KEEPER_ON_GOAL") & (board[6][2] = "FLOOR" | board[6][2] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][2];

            esac;
            
        next(board[5][3]) := 
            case
                board[5][3] = "KEEPER_ON_GOAL": 
                    case
                        board[6][3] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][3] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][4] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][2] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][3] = "BOX" & (board[7][3] = "FLOOR" | board[7][3] = "GOAL") & next(action) = d : "GOAL";
                        board[4][3] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = u : "GOAL";
                        board[5][4] = "BOX" & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = r : "GOAL";
                        board[5][2] = "BOX" & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][3] = "KEEPER":
                    case
                        board[6][3] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][3] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][4] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][2] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][3] = "BOX" & (board[7][3] = "FLOOR" | board[7][3] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][3] = "BOX" & (board[3][3] = "FLOOR" | board[3][3] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][4] = "BOX" & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][2] = "BOX" & (board[5][1] = "FLOOR" | board[5][1] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][3] = "FLOOR":
                    case
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][3] = "KEEPER" | board[7][3] = "KEEPER_ON_GOAL") & (board[6][3] = "BOX" | board[6][3] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][3] = "GOAL":
                    case
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][3] = "KEEPER" | board[7][3] = "KEEPER_ON_GOAL") & (board[6][3] = "BOX" | board[6][3] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][3] = "KEEPER" | board[3][3] = "KEEPER_ON_GOAL") & (board[4][3] = "BOX" | board[4][3] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][1] = "KEEPER" | board[5][1] = "KEEPER_ON_GOAL") & (board[5][2] = "BOX" | board[5][2] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][3] = "BOX":
                    case
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[6][3] = "FLOOR" | board[6][3] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][3] = "BOX_ON_GOAL":
                    case
                        (board[6][3] = "KEEPER" | board[6][3] = "KEEPER_ON_GOAL") & (board[4][3] = "FLOOR" | board[4][3] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][3] = "KEEPER" | board[4][3] = "KEEPER_ON_GOAL") & (board[6][3] = "FLOOR" | board[6][3] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][3];

            esac;
            
        next(board[5][4]) := 
            case
                board[5][4] = "KEEPER_ON_GOAL": 
                    case
                        board[6][4] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][4] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][5] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][3] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][4] = "BOX" & (board[7][4] = "FLOOR" | board[7][4] = "GOAL") & next(action) = d : "GOAL";
                        board[4][4] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = u : "GOAL";
                        board[5][5] = "BOX" & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = r : "GOAL";
                        board[5][3] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][4] = "KEEPER":
                    case
                        board[6][4] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][4] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][5] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][3] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][4] = "BOX" & (board[7][4] = "FLOOR" | board[7][4] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][4] = "BOX" & (board[3][4] = "FLOOR" | board[3][4] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][5] = "BOX" & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][3] = "BOX" & (board[5][2] = "FLOOR" | board[5][2] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][4] = "FLOOR":
                    case
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][4] = "KEEPER" | board[7][4] = "KEEPER_ON_GOAL") & (board[6][4] = "BOX" | board[6][4] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][4] = "GOAL":
                    case
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][4] = "KEEPER" | board[7][4] = "KEEPER_ON_GOAL") & (board[6][4] = "BOX" | board[6][4] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][4] = "KEEPER" | board[3][4] = "KEEPER_ON_GOAL") & (board[4][4] = "BOX" | board[4][4] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][2] = "KEEPER" | board[5][2] = "KEEPER_ON_GOAL") & (board[5][3] = "BOX" | board[5][3] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][4] = "BOX":
                    case
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[6][4] = "FLOOR" | board[6][4] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][4] = "BOX_ON_GOAL":
                    case
                        (board[6][4] = "KEEPER" | board[6][4] = "KEEPER_ON_GOAL") & (board[4][4] = "FLOOR" | board[4][4] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][4] = "KEEPER" | board[4][4] = "KEEPER_ON_GOAL") & (board[6][4] = "FLOOR" | board[6][4] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][4];

            esac;
            
        next(board[5][5]) := 
            case
                board[5][5] = "KEEPER_ON_GOAL": 
                    case
                        board[6][5] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][5] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][6] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][4] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][5] = "BOX" & (board[7][5] = "FLOOR" | board[7][5] = "GOAL") & next(action) = d : "GOAL";
                        board[4][5] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = u : "GOAL";
                        board[5][6] = "BOX" & (board[5][7] = "FLOOR" | board[5][7] = "GOAL") & next(action) = r : "GOAL";
                        board[5][4] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][5] = "KEEPER":
                    case
                        board[6][5] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][5] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][6] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][4] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][5] = "BOX" & (board[7][5] = "FLOOR" | board[7][5] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][5] = "BOX" & (board[3][5] = "FLOOR" | board[3][5] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][6] = "BOX" & (board[5][7] = "FLOOR" | board[5][7] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][4] = "BOX" & (board[5][3] = "FLOOR" | board[5][3] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][5] = "FLOOR":
                    case
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][5] = "KEEPER" | board[7][5] = "KEEPER_ON_GOAL") & (board[6][5] = "BOX" | board[6][5] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & (board[5][6] = "BOX" | board[5][6] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][5] = "GOAL":
                    case
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][5] = "KEEPER" | board[7][5] = "KEEPER_ON_GOAL") & (board[6][5] = "BOX" | board[6][5] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][5] = "KEEPER" | board[3][5] = "KEEPER_ON_GOAL") & (board[4][5] = "BOX" | board[4][5] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & (board[5][6] = "BOX" | board[5][6] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][3] = "KEEPER" | board[5][3] = "KEEPER_ON_GOAL") & (board[5][4] = "BOX" | board[5][4] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][5] = "BOX":
                    case
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[6][5] = "FLOOR" | board[6][5] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][5] = "BOX_ON_GOAL":
                    case
                        (board[6][5] = "KEEPER" | board[6][5] = "KEEPER_ON_GOAL") & (board[4][5] = "FLOOR" | board[4][5] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][5] = "KEEPER" | board[4][5] = "KEEPER_ON_GOAL") & (board[6][5] = "FLOOR" | board[6][5] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][6] = "KEEPER" | board[5][6] = "KEEPER_ON_GOAL") & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][6] = "FLOOR" | board[5][6] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][5];

            esac;
            
        next(board[5][6]) := 
            case
                board[5][6] = "KEEPER_ON_GOAL": 
                    case
                        board[6][6] = "FLOOR" & next(action) = d : "GOAL";
                        board[4][6] = "FLOOR" & next(action) = u : "GOAL";
                        board[5][7] = "FLOOR" & next(action) = r : "GOAL";
                        board[5][5] = "FLOOR" & next(action) = l : "GOAL";
                        board[6][6] = "BOX" & (board[7][6] = "FLOOR" | board[7][6] = "GOAL") & next(action) = d : "GOAL";
                        board[4][6] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = u : "GOAL";
                        board[5][7] = "BOX" & (board[5][8] = "FLOOR" | board[5][8] = "GOAL") & next(action) = r : "GOAL";
                        board[5][5] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = l : "GOAL";
                        TRUE : "KEEPER_ON_GOAL";
                    esac;

                board[5][6] = "KEEPER":
                    case
                        board[6][6] = "FLOOR" & next(action) = d : "FLOOR";
                        board[4][6] = "FLOOR" & next(action) = u : "FLOOR";
                        board[5][7] = "FLOOR" & next(action) = r : "FLOOR";
                        board[5][5] = "FLOOR" & next(action) = l : "FLOOR";
                        board[6][6] = "BOX" & (board[7][6] = "FLOOR" | board[7][6] = "GOAL") & next(action) = d : "FLOOR";
                        board[4][6] = "BOX" & (board[3][6] = "FLOOR" | board[3][6] = "GOAL") & next(action) = u : "FLOOR";
                        board[5][7] = "BOX" & (board[5][8] = "FLOOR" | board[5][8] = "GOAL") & next(action) = r : "FLOOR";
                        board[5][5] = "BOX" & (board[5][4] = "FLOOR" | board[5][4] = "GOAL") & next(action) = l : "FLOOR";
                        TRUE : "KEEPER";
                    esac;

                board[5][6] = "FLOOR":
                    case
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER";
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER";
                        (board[7][6] = "KEEPER" | board[7][6] = "KEEPER_ON_GOAL") & (board[6][6] = "BOX" | board[6][6] = "BOX_ON_GOAL") & next(action) = u : "BOX";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = d : "BOX";
                        (board[5][8] = "KEEPER" | board[5][8] = "KEEPER_ON_GOAL") & (board[5][7] = "BOX" | board[5][7] = "BOX_ON_GOAL") & next(action) = l : "BOX";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = r : "BOX";
                        TRUE : "FLOOR";
                    esac;

                board[5][6] = "GOAL":
                    case
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & next(action) = u : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & next(action) = d : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & next(action) = l : "KEEPER_ON_GOAL";--logic problem was here!
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & next(action) = r : "KEEPER_ON_GOAL"; --logic problem was here!
                        (board[7][6] = "KEEPER" | board[7][6] = "KEEPER_ON_GOAL") & (board[6][6] = "BOX" | board[6][6] = "BOX_ON_GOAL") & next(action) = u : "BOX_ON_GOAL";
                        (board[3][6] = "KEEPER" | board[3][6] = "KEEPER_ON_GOAL") & (board[4][6] = "BOX" | board[4][6] = "BOX_ON_GOAL") & next(action) = d : "BOX_ON_GOAL";
                        (board[5][8] = "KEEPER" | board[5][8] = "KEEPER_ON_GOAL") & (board[5][7] = "BOX" | board[5][7] = "BOX_ON_GOAL") & next(action) = l : "BOX_ON_GOAL";
                        (board[5][4] = "KEEPER" | board[5][4] = "KEEPER_ON_GOAL") & (board[5][5] = "BOX" | board[5][5] = "BOX_ON_GOAL") & next(action) = r : "BOX_ON_GOAL";
                        TRUE : "GOAL";
                    esac;

                board[5][6] = "BOX":
                    case
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = u : "KEEPER";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[6][6] = "FLOOR" | board[6][6] = "GOAL") & next(action) = d : "KEEPER";
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = l : "KEEPER";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][7] = "FLOOR" | board[5][7] = "GOAL") & next(action) = r : "KEEPER";
                        TRUE : "BOX";    
                    esac;

                board[5][6] = "BOX_ON_GOAL":
                    case
                        (board[6][6] = "KEEPER" | board[6][6] = "KEEPER_ON_GOAL") & (board[4][6] = "FLOOR" | board[4][6] = "GOAL") & next(action) = u : "KEEPER_ON_GOAL";
                        (board[4][6] = "KEEPER" | board[4][6] = "KEEPER_ON_GOAL") & (board[6][6] = "FLOOR" | board[6][6] = "GOAL") & next(action) = d : "KEEPER_ON_GOAL";
                        (board[5][7] = "KEEPER" | board[5][7] = "KEEPER_ON_GOAL") & (board[5][5] = "FLOOR" | board[5][5] = "GOAL") & next(action) = l : "KEEPER_ON_GOAL";
                        (board[5][5] = "KEEPER" | board[5][5] = "KEEPER_ON_GOAL") & (board[5][7] = "FLOOR" | board[5][7] = "GOAL") & next(action) = r : "KEEPER_ON_GOAL";
                        TRUE : "BOX_ON_GOAL";    
                    esac;


                TRUE : board[5][6];

            esac;
            
        next(board[5][7]) := "NULL";
                       
        next(board[5][8]) := "NULL";
                       
        next(board[6][-2]) := "NULL";
                       
        next(board[6][-1]) := "NULL";
                       
        next(board[6][0]) := "NULL";
                       
        next(board[6][1]) := "NULL";
                       
        next(board[6][2]) := "NULL";
                       
        next(board[6][3]) := "NULL";
                       
        next(board[6][4]) := "NULL";
                       
        next(board[6][5]) := "NULL";
                       
        next(board[6][6]) := "NULL";
                       
        next(board[6][7]) := "NULL";
                       
        next(board[6][8]) := "NULL";
                       
        next(board[7][-2]) := "NULL";
                       
        next(board[7][-1]) := "NULL";
                       
        next(board[7][0]) := "NULL";
                       
        next(board[7][1]) := "NULL";
                       
        next(board[7][2]) := "NULL";
                       
        next(board[7][3]) := "NULL";
                       
        next(board[7][4]) := "NULL";
                       
        next(board[7][5]) := "NULL";
                       
        next(board[7][6]) := "NULL";
                       
        next(board[7][7]) := "NULL";
                       
        next(board[7][8]) := "NULL";
                        

    
        LTLSPEC G(!( board[1][3] = "BOX_ON_GOAL"  & board[3][1] = "BOX_ON_GOAL" & board[3][5] = "BOX_ON_GOAL" & board[5][3] = "BOX_ON_GOAL" ))

    